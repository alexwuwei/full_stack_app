<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>2 Resource with Angular</title>
    <link rel="stylesheet" href="/css/animate.css" charset="utf-8">
  </head>
  <body ng-app="CustomerApp">
    <script type="text/javascript" src="/build/bundle.js"></script>
    <h1 class="animated shake">Welcome!</h1>
    <main ng-init="custctrl.getCustomers()" ng-controller="CustomerController as custctrl" ng-cloak>
      <h3>customers!</h3>
      <section ng-repeat="customer in custctrl.customers" ng-cloak>
        {{customer.name}}<br>
        {{customer.age}}<br>
        {{customer.email}}<br>
        <button type="submit" ng-click="custctrl.updateCustomer.rendered = customer._id">update record</button>
        <button type="button" ng-click="custctrl.deleteCustomer(customer)">delete record</button>
        <form class="animated bounceIn" ng-show="custctrl.updateCustomer.rendered === customer._id" ng-submit="custctrl.updateCustomer.rendered = null">
          <span>Name:</span><input type="text" ng-model="customer.name" ng-model-options="{debounce: 500}" minlength="3" required><br>
          <span>Age:</span><input type="number" ng-model="customer.age" ng-model-options="{debounce: 500}" required><br>
          <span>Email:</span><input type="email" ng-model="customer.email" ng-model-options="{debounce: 500}" required><br>
          <button type="submit">Save Changes</button>
          <button type="reset" ng-click="custctrl.resetCustomer(customer); custctrl.updateCustomer.rendered = null">Discard Changes</button>
        </form>
      </section>
    </main>
    <main ng-init="prodctrl.getProducts()" ng-controller="ProductController as prodctrl" ng-cloak>
      <h3>products!</h3>
      <section ng-repeat="product in prodctrl.products" ng-cloak>
        {{product.name}}<br>
        {{product.upc}}<br>
        {{product.stock}}<br>
        <button type="submit" ng-click="prodctrl.updateProduct.rendered = product._id">Update Record</button>
        <button type="submit"ng-click="prodctrl.deleteProduct(product)">Delete Record</button>
        <form class="submit-form" ng-show="prodctrl.updateProduct.rendered === product._id" ng-submit="prodctrl.updateProduct.rendered = null">
          <span>Name:</span><input type="text" ng-model="product.name" ng-model-options="{debounce: 500}" minlength="3" required><br>
          <span>UPC:</span><input type="text" ng-model="product.upc" ng-model-options="{debounce: 500}" required><br>
          <span>Stock Count:</span><input type="number" ng-model="product.stock" ng-model-options="{debounce: 500}" required><br>
          <button type="submit">Save Changes</button>
          <button type="reset" ng-click="prodctrl.resetProduct(product); prodctrl.updateProduct.rendered = null">Discard Changes</button>
        </form>
      </section>
    </main>
  </body>
</html>
